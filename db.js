
var map =[
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,1, 1,1,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,1, 1,1,1,1,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,0,0,1,1,1,1,0, 0,0,1,1,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,0,0,1,1,1,1,0, 0,0,0,0,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,0,0,1,1,1,1,0, 0,0,0,0,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,0,0,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,1,0,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,1,0,0,0,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,1,0,0,0,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,0,1,1,0,0, 0,1,1,1,1,0,0,1,1,0, 0,0,1,1,1,1,0,0,0,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,0,0,1,1,1,0, 0,1,1,1,1,0,0,1,1,0, 0,0,1,1,1,1,0,0,0,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,0, 0,1,1,1,1,0,0,1,1,0, 0,0,0,0,0,0,0,0,0,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,0, 0,1,1,1,1,0,1,1,0,0, 0,0,0,0,0,0,0,0,0,1, 1,1,1,1,1,1,1,1,1,0],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,0,0,1,0,0,0,0,0, 0,0,0,0,0,1,1,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,0,0,0,0,0, 0,0,0,0,0,1,1,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 0,0,1,1,1,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,0,0,0,0, 0,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,0,0,0,0, 0,1,1,0,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,0,0, 0,0,0,0,0,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,0,0, 0,0,0,0,0,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,0,0,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,0,0,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,0,0,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,0,1, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,1,0, 0,1,1,1,1,0,0,1,1,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,0,0, 0,1,1,1,1,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,0,0, 0,1,1,1,1,0,0,0,0,0, 0,0,0,0,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,0,0, 0,1,1,1,1,0,0,0,0,0, 0,0,0,0,0,0,1,1,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,0,0,0,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,1,1,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,1,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,1,1,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,0,0,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,1,0,0,0,1,1, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,1,1,1,1,0, 0,0,1,1,0,1,0,1,0,0, 0,0,0,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,1,1,1,0, 0,0,1,1,0,1,0,0,1,0, 1,1,1,0,0,0,0,0,0,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,1,1,1,0, 0,0,1,1,0,1,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,0,1,1,0, 0,0,1,1,0,1,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,0,1,1,0, 0,0,1,1,0,1,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,0,0,0,0,0,1,1,0, 0,0,1,1,0,0,0,0,0,0, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
 [1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1]
]
var worklist = [
	['2_2'  , 37,9, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['2_1'  , 38,8, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['2_4'  , 42,8, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['2_3'  ,39,12, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['1_1'  , 45,9, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['h_1'  ,45,17, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['h_2'  ,60,17, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['1' 	,55,27, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['2' 	,55,25, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['3_1'  ,37,24, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['3_2'  ,37,27, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['3_3'  ,40,22, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['s' 	,28,21, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['6_1' 	,9,5, 	'이예승, <br> &#60;Tea Room: 2020&#62;'],
	['6_2' 	,12,11, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['7_1' 	,25, 10,'이예승, <br> &#60;Tea Room: 2020&#62;'],
	['7_2' 	,27, 12,'이예승, <br> &#60;Tea Room: 2020&#62;'],
	['s_2' 	,8,17, 	'이예승, <br> &#60;Tea Room: 2020&#62;'],
	['11' 	,4,26, 	'이예승, <br> &#60;Tea Room: 2020&#62;'],
	['9_1' 	,16,24, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['9_2' 	,12,24, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['9_3' 	,13,29, '이예승, <br> &#60;Tea Room: 2020&#62;'],
	['10' 	,16,3, 	'이예승 <br> ,&#60;Tea Room: 202&#62;>']
]

       var room_2 = [8,32]
       var room_1 = [8,40]
       var room_12 = [8,47]
       var room_16 = [21,47]
       var room_5 = [30,45]
       var room_4 = [21,40]
       var room_3 = [21,31]
       var room_13 = [15,47]
       var room_15 = [15,31]
       var room_14 = [15,24]
       var room_6 = [8,5]
       var room_11_1 = [0,5]
       var room_7 = [8,17]
       var room_8 = [21,14]
       var room_10 = [3,11]
       var room_9 = [21,6]
       var room_11 = [21,0]
       var room_17 = [14,6]
       var currentX 
       var currentY
       

$(document).ready(function(){
	if(window.location.hash) {
	  	var selected_room = eval('room_'.concat(window.location.hash.split('#')[1]))
	  	$('.room').addClass('room_' + window.location.hash.split('#')[1])
	  	var selected_room_filtered = findpoint(selected_room[0], selected_room[1])
	  	console.log(findpoint(selected_room[0], selected_room[1]))
		$('.me').css({'left':(selected_room[0]+5)*10+'vw'})
		$('.me').css({'top':(selected_room[1]+8)*10+'vw'})
		currentX = selected_room[0]+5
		currentY = selected_room[1]+8
		$('.arrow'+ window.location.hash.split('#')[1]).show()
	} else {
		$('.popup').show()
	}
	function findpoint(pointx, pointy){
		
		if (map[pointy][pointx] == 0){
			console.log('hey')
			return [pointx,pointy]

		}else if (map[pointy+1][pointx] == 0){
			return [pointx,pointy+1]

		}else if (map[pointy-1][pointx] == 0){
			return [pointx,pointy-1]

		}else if(map[pointy][pointx-1] == 0){
			return [pointx-1,pointy]

		}else if(map[pointy][pointx+1] == 0){
			return [pointx+1,pointy]

		}else if(map[pointy-1][pointx-1] == 0){
			return [pointx-1,pointy-1]

		}else if(map[pointy+1][pointx+1] == 0){
			return [pointx+1,pointy+1]

		}else if(map[pointy+1][pointx-1] == 0){
			return [pointx-1,pointy+1]

		}else if(map[pointy-1][pointx+1] == 0){
			return [pointx+1,pointy-1]
		}

	}
	var down = false
	function movedot(x,y,dir){
		console.log(dir)
		console.log(x)
		console.log(y)
		if(dir === 'up'){var newx = x, newy = y-1}
		if(dir === 'down'){var newx = x, newy = y+1}
		if(dir === 'left'){var newx = x-1, newy = y}
		if(dir === 'right'){var newx = x+1, newy = y}
		if(map[newy][newx] == 0 && down){
			$('.me').css({'left':(newx)*10+'vw'})
			$('.me').css({'top': (newy)*10+'vw'})
			$('.room').css({'transform': 'translateX('+(-10*(newx-5))+'vw) translateY('+(-10*(newy-8))+'vw) scale(1)'})
			currentX = newx
			currentY = newy
		}else{
			clearTimeout(continue_move)
		}
	 	continue_move = setTimeout(function(){
	 		movedot(newx,newy,dir)
	 	},200)
	}
	$('.arrow_up').on('touchstart',function(){
		down = true
		movedot(currentX,currentY,'up')
	})
	$('.arrow_down').on('touchstart',function(){
		down = true
		movedot(currentX,currentY,'down')
	})
	$('.arrow_left').on('touchstart',function(){
		down = true
		movedot(currentX,currentY,'left')
	})
	$('.arrow_right').on('touchstart',function(){
		down = true
		movedot(currentX,currentY,'right')
	})
	$('.arrow').on('touchend', function(){
		down = false
			clearTimeout(continue_move)
	})

for (var i = worklist.length - 1; i >= 0; i--) {
	$('.room').append('<div class="title title_'+worklist[i][0]+'" style="left:'+worklist[i][2]*10+'vw;top:'+worklist[i][1]*10+'vw;">'+worklist[i][3]+'<div>')
}
})
