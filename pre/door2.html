<!DOCTYPE html>
<head>
<script src="https://use.fontawesome.com/8af6c1b3d2.js"></script>
<meta charset="UTF-8">
<link href="src/jquery.booklet.latest.css" type="text/css" rel="stylesheet" media="screen, projection, tv" />
<link href="door2.css" type="text/css" rel="stylesheet"/>
  
<meta 
     name='viewport' 
     content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' 
/>
<script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
<script src="src/jquery.waitforimages.js"></script>
<script src="src/door2_contents.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
			var w = window.innerWidth
			var h = window.innerHeight
	if(!window.location.hash) {
		$('.wholeintro').click(function(){
			console.log('shd')
		$('.wholeintro').fadeOut(100)
			$('.door').addClass('door_open')
			$('.door_bottom').addClass('door_bottom_open')
			loop()
		})
	} else {
		$('.wholeintro').hide()
		setTimeout(function(){
			$('.door').addClass('door_open')
			$('.door_bottom').addClass('door_bottom_open')
			loop()
		},1000)
	}
		var counter = 0
		var looptimeout
		function loop(){
			var ran_1 = Math.floor(Math.random()*5)
			var ran_2 = Math.floor(Math.random()*5)
			console.log(ran_1)
			if(ran_1>2){
					$('.door_preview_warpper_1').addClass('door_preview_warper_show')
			}else{
					$('.door_preview_warpper_1').removeClass('door_preview_warper_show')
			}
			if(ran_2>2){
					$('.door_preview_warpper_2').addClass('door_preview_warper_show')
			}else{
					$('.door_preview_warpper_2').removeClass('door_preview_warper_show')
			}
				looptimeout = setTimeout(function(){
					loop()
				},500)
		}
		$('.door_2').click(function(){
			$('.content_wrapper').addClass('content_wrapper_2')
			
			$('.door_wrapper_2 .door_bottom_open').addClass('door_open_open')

			clearTimeout(looptimeout)

			setTimeout(function(){
			$('body').addClass('scroll')
			$('.door_wrapper').hide()
				var counter = 0
				var looptimeout
				$('body').scroll(function(){
					$('.bubble_wrapper').each(function(){
						console.log($('.bubble_wrapper_1').offset().top)
						if($(this).offset().top<window.innerHeight*0.98 && $(this).offset().top>window.innerHeight*0.4 ){
							$(this).addClass('showbubble')
						}else if($(this).offset().top>window.innerHeight*0.8 || $(this).offset().top<window.innerHeight*0){
							$(this).removeClass('showbubble')
						}
					})
				});
				$('.content_wrapper').append('<a class="back">돌아가기</a>\
												<div class="intro">\
												일시:2020. 4. 7.(화) 13:30~18:00 <br>\
												장소:서울시립남서울미술관 라운지  <br>\
												<전혀 예술적인, 엉성한 미술관> 연계 <br>\
												남서울미술관 직원과의 대담&워크숍 <br>\
												</div>')

				$('.back').click(function(){
					window.location.hash =  "home";
					location.reload();
				})
				for (var k = 0; k < content_json.length ; k++) {
					for (var i = 0; i < content_json[k].length; i++) {
						$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[k][i][0]+'"><div class="bubble bubble_'+content_json[k][i][0]+'">'+content_json[k][i][2]+'</div></div>')
					}
				}
				// var ran = Math.floor(Math.random()*content_json.length-7)+1
				// console.log(ran)
				// for (var i = 0; i < content_json[ran].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[ran][i][0]+'"><div class="bubble bubble_'+content_json[ran][i][0]+'">'+content_json[ran][i][2]+'</div></div>')
				// }
				// for (var i = 0; i < content_json[ran+1].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[ran+1][i][0]+'"><div class="bubble bubble_'+content_json[ran+1][i][0]+'">'+content_json[ran+1][i][2]+'</div></div>')
				// }
				// for (var i = 0; i < content_json[ran+2].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[ran+2][i][0]+'"><div class="bubble bubble_'+content_json[ran+2][i][0]+'">'+content_json[ran+2][i][2]+'</div></div>')
				// }
				// for (var i = 0; i < content_json[ran+3].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[ran+3][i][0]+'"><div class="bubble bubble_'+content_json[ran+3][i][0]+'">'+content_json[ran+3][i][2]+'</div></div>')
				// }
				// for (var i = 0; i < content_json[ran+4].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[ran+4][i][0]+'"><div class="bubble bubble_'+content_json[ran+4][i][0]+'">'+content_json[ran+4][i][2]+'</div></div>')
				// }
				// for (var i = 0; i < content_json[content_json.length-1].length; i++) {
				// 	$('.content_wrapper').append('<div class="bubble_wrapper bubble_wrapper_'+ content_json[content_json.length-1][i][0]+'"><div class="bubble bubble_'+content_json[content_json.length-1][i][0]+'">'+content_json[content_json.length-1][i][2]+'</div></div>')
				// }
				console.log(w>h)
				if(w>h){
					console.log('hey')
					var $toolbar = $('.back');
					$toolbar.parent().after($toolbar);
					$('.back').css({'top':$('.content_wrapper_2').outerHeight()})
				}
			},500)
		})
		$('.door_1').click(function(){
			clearTimeout(looptimeout)
			$('.content_wrapper').addClass('content_wrapper_1')

			$('.door_wrapper_1 .door_bottom_open').addClass('door_open_open')

			setTimeout(function(){
				$('body').addClass('scroll')
				$('.door_wrapper').hide()
			var w = window.innerWidth
			var h = window.innerHeight
					console.log(w/h)
				if(w>h){
					$('.content_wrapper').append('\
						<a class="back">돌아가기</a>\
						<a class="title">작업 (외) 일</a>\
						<img class="talk talk_1" src="talk_bubble/Untitled-5-01.png">\
						<img class="talk talk_1" src="talk_bubble/Untitled-5-01.png">\
						<img class="talk talk_2" src="talk_bubble/Untitled-5-02.png">\
						<img class="talk talk_3" src="talk_bubble/Untitled-5-03.png">\
						<img class="talk talk_4" src="talk_bubble/Untitled-5-04.png">\
						<img class="talk talk_5" src="talk_bubble/Untitled-5-05.png">\
						<img class="talk talk_6" src="talk_bubble/Untitled-5-06.png">\
						<img class="paper paper_1" src="talk_bubble/paper-01.png" style="right:    0vh; top: 0vh;">\
						<img class="paper paper_2" src="talk_bubble/paper-02.png" style="right:   11vh; top: 10vh;">\
						<img class="paper paper_3" src="talk_bubble/paper-03.png" style="right:-16.5vh; top: 20vh;">\
						<img class="paper paper_4" src="talk_bubble/paper-04.png" style="right:  -22vh; top: 30vh;">\
						<img class="paper paper_5" src="talk_bubble/paper-05.png" style="right:   5.5vh; top: 40vh;">\
						<img class="paper paper_6" src="talk_bubble/paper-06.png" style="right:  -00vh; top: 50vh;">\
						<img class="paper paper_7" src="talk_bubble/paper-07.png" style="right:  -33vh; top: 40vh;">\
						<img class="paper paper_8" src="talk_bubble/paper-08.png" style="right:  -26.5vh; top: 50vh;">\
						<img class="paper paper_9" src="talk_bubble/paper-09.png" style="right:   11vh; top: 60vh;">\
						<img class="paper paper_10" src="talk_bubble/paper-10.png" style="right: -16.5vh; top: 70vh;">\
						<img class="paper paper_11" src="talk_bubble/paper-11.png" style="right: -11vh; top: 80vh;">\
					')
				}else{
					$('.content_wrapper').append('\
						<a class="back">돌아가기</a>\
						<a class="title">작업 (외) 일지</a>\
						<img class="talk talk_1" src="talk_bubble/Untitled-5-01.png">\
						<img class="talk talk_1" src="talk_bubble/Untitled-5-01.png">\
						<img class="talk talk_2" src="talk_bubble/Untitled-5-02.png">\
						<img class="talk talk_3" src="talk_bubble/Untitled-5-03.png">\
						<img class="talk talk_4" src="talk_bubble/Untitled-5-04.png">\
						<img class="talk talk_5" src="talk_bubble/Untitled-5-05.png">\
						<img class="talk talk_6" src="talk_bubble/Untitled-5-06.png">\
						<img class="paper paper_1" src="talk_bubble/paper-01.png" style="right: 0vw; top: 0vh;">\
						<img class="paper paper_2" src="talk_bubble/paper-02.png" style="right: 20vw; top: 10vh;">\
						<img class="paper paper_3" src="talk_bubble/paper-03.png" style="right: -30vw; top: 20vh;">\
						<img class="paper paper_4" src="talk_bubble/paper-04.png" style="right: -20vw; top: 30vh;">\
						<img class="paper paper_5" src="talk_bubble/paper-05.png" style="right: 10vw; top: 40vh;">\
						<img class="paper paper_6" src="talk_bubble/paper-06.png" style="right: -00vw; top: 50vh;">\
						<img class="paper paper_7" src="talk_bubble/paper-07.png" style="right: -60vw; top: 40vh;">\
						<img class="paper paper_8" src="talk_bubble/paper-08.png" style="right: -50vw; top: 50vh;">\
						<img class="paper paper_9" src="talk_bubble/paper-09.png" style="right: 20vw; top: 60vh;">\
						<img class="paper paper_10" src="talk_bubble/paper-10.png" style="right: -30vw; top: 70vh;">\
						<img class="paper paper_11" src="talk_bubble/paper-11.png" style="right: -20vw; top: 80vh;">\
					')

				}
				var ran_all = Math.floor(Math.random()*6)+1
				$('.talk_'+ran_all).show()
				console.log($('.talk_'+ran_all))
			$('.back').click(function(){
					window.location.hash =  "home";
					location.reload();
			})
			var w = window.innerWidth
			var h = window.innerHeight
			var current 
			var orgX
			var orgY
			var newX
			var newY
			var down = false
			setInterval(function(){
				var random = Math.floor(Math.random()*11)+1
				var random_t = Math.floor(Math.random()*2)
				var random_x = Math.floor(Math.random()*6)
				var random_y = Math.floor(Math.random()*12)
				var cur_left = $('.paper_'+random).offset().left
				var cur_top =  $('.paper_'+random).offset().top
				console.log(random_t)
				if(cur_top > 0.3*h){
					$('.paper_'+random).css({'top' : cur_top + -0.2*h + 'px'})
				}else if(cur_top < 0.3*h){
					$('.paper_'+random).css({'top' : cur_top + 0.2*h + 'px'})
				}else if(random_t>0){
					$('.paper_'+random).css({'top' : cur_top + -0.2*h + 'px'})
				}else{
					$('.paper_'+random).css({'top' : cur_top + 0.2*h + 'px'})
				}
			}, 3000);
				$('.paper').on('touchstart', function(e){
					down = true
					$(this).addClass('movepaper')
					current = $(this).attr('class').split('paper_')[1].split(' ')[0]
					orgX = e.originalEvent.touches[0].pageX;
					orgY = e.originalEvent.touches[0].pageY;
				})
				$('body').on('touchmove', function(e){
					if(down){
						newX = e.originalEvent.touches[0].pageX;
						newY = e.originalEvent.touches[0].pageY;
						console.log(orgX - newX)
						$('.paper_'+current).css({'margin-right':(orgX - newX)+'px'})
						$('.paper_'+current).css({'margin-top':(newY - orgY)+'px'})
					}
				})
				$('body').on('touchend', function(e){
					$('.talk_'+ran_all).fadeOut(200)
					var ran = Math.floor(Math.random()*6)+1
					console.log($('.talk_'+ran))
					$('.talk_'+ran).show()
					setTimeout(function(){
						$('.talk_'+ran).fadeOut(200)
					},300)
					$('.movepaper').removeClass('movepaper')
					$('.paper').css({'margin-right':0})
					$('.paper').css({'margin-top':0})
					down = false
				})
var isMobile = false; //initiate as false
// device detection
if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
    isMobile = true;
}
if(!isMobile){
				$('.paper').on('mousedown', function(e){
				event.preventDefault();
					down = true
					$(this).addClass('movepaper')
					current = $(this).attr('class').split('paper_')[1].split(' ')[0]
					orgX = e.pageX;
					orgY = e.pageY;
				})
				$('body').on('mousemove', function(e){
				event.preventDefault();
					if(down){
						newX = e.pageX;
						newY = e.pageY;
						console.log(orgX - newX)
						$('.paper_'+current).css({'margin-right':(orgX - newX)+'px'})
						$('.paper_'+current).css({'margin-top':(newY - orgY)+'px'})
					}
				})
				$('body').on('mouseup', function(e){
				event.preventDefault();
					$('.talk_'+ran_all).fadeOut(200)
					var ran = Math.floor(Math.random()*6)+1
					console.log($('.talk_'+ran))
					$('.talk_'+ran).show()
					setTimeout(function(){
						$('.talk_'+ran).fadeOut(200)
					},300)
					$('.movepaper').removeClass('movepaper')
					$('.paper').css({'margin-right':0})
					$('.paper').css({'margin-top':0})
					down = false
				})
}

			},500)
		})
	})
</script>
</head>
<body id="content">
	<div class="wholeintro">
				<div class="click"></div>
	</div>
	<div class="door_wrapper door_wrapper_1">
		<div class="door_bottom">
			<img class="door door_1" src="img/door2-06.png">
		</div>
		<div class="dia dia_1"></div>
		<div class="door_preview_warpper door_preview_warpper_1">
			<div class="door_preview door_preview_1">...</div>
		</div>
		<div class="title"><작업 (외) 일지></div>
	</div>
	<div class="door_wrapper door_wrapper_2">
		<div class="door_bottom">
			<img class="door door_2" src="img/door2-07.png">
		</div>
		<div class="dia dia_2"></div>
		<div class="door_preview_warpper door_preview_warpper_2">
			<div class="door_preview door_preview_2">...</div>
		</div>
		<div class="title"><직원대담></div>
	</div>
	<div class="content_wrapper">
	</div>
</body>
</head>